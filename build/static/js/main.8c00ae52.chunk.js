(this["webpackJsonpmy-app3"]=this["webpackJsonpmy-app3"]||[]).push([[0],{158:function(e,t,a){},188:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),s=a(39),i=a.n(s),o=(a(158),a(8)),u=a(248),l=a(252),p=a(125),d=a(59);!function(e){e.SET_IS_AUTHENTICATED="SET_IS_AUTHENTICATED",e.SET_AUTH_ERROR="SET_AUTH_ERROR",e.SET_BLOCKERS="SET_BLOCKERS",e.SET_DATE="SET_DATE",e.SET_USER="SET_USER",e.RESET="RESET"}(n||(n={}));var j=function(e,t){return t.type===n.SET_USER?t.payload:e},b=function(e,t){return t.type===n.SET_BLOCKERS?t.payload:e},h={userInfo:{name:"",email:"",id:""},blockers:[],selectedDate:new Date,isAuthenticated:!1,loginError:!1},m=function(e,t){return t.type===n.SET_DATE?t.payload:e},O=n.SET_IS_AUTHENTICATED,f=n.SET_AUTH_ERROR,x=function(e,t){return t.type===O?t.payload:e},v=function(e,t){return t.type===f?t.payload:e},k=function(e,t){return t.type===n.RESET?(sessionStorage.removeItem(""),Object(d.a)({},h)):function(e,t){var a=e.userInfo,n=e.blockers,r=e.selectedDate,c=e.isAuthenticated,s=e.loginError;return{userInfo:j(a,t),blockers:b(n,t),selectedDate:m(r,t),isAuthenticated:x(c,t),loginError:v(s,t)}}(e,t)},E=a(2),g=Object(r.createContext)({state:h,dispatch:function(){return null}}),T=function(e){var t=e.children,a=e.store,n=void 0===a?h:a,r=Object(p.useStorageReducer)(sessionStorage,"",k,n),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(E.jsx)(g.Provider,{value:{state:s,dispatch:i},children:t})},y=function(){return Object(r.useContext)(g)},S=a(18),w=a(26),_=a(56),A=a.n(_),C=window.localStorage,N=function(e,t){C.setItem(e,t)},I=function(e){return C.getItem(e)||""},D="https://speedy-standup.herokuapp.com",R=function(){var e=Object(w.a)(Object(S.a)().mark((function e(){var t;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(D,"/blocker/get-all"),e.abrupt("return",A()(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=I("token"),n="".concat(D,"/blocker/").concat(t),e.abrupt("return",A()({method:"DELETE",headers:{token:a},url:n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n,r,c,s,i;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.blocker,r=t.ticket,c=I("token"),s=JSON.stringify({name:a,blocker:n,ticket:r}),i="".concat(D,"/blocker/create"),e.abrupt("return",A()({method:"POST",url:i,headers:{token:c,"Content-Type":"application/json"},data:s}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n.SET_BLOCKERS,L=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:a=e.sent,n=a.data,console.log("DATA",n),t({type:B,payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t,a,n){var r;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:r=n.filter((function(e){return e._id!==t})),a({type:B,payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n,r,c;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.blocker,r=t.ticket,c=t.dispatch,e.prev=1,e.next=4,H({name:a,blocker:n,ticket:r});case 4:L(c),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=y(),t=e.dispatch,a=e.state.userInfo.name,n=Object(r.useState)(a),c=Object(o.a)(n,2),s=c[0],i=c[1],p=Object(r.useState)(""),d=Object(o.a)(p,2),j=d[0],b=d[1],h=Object(r.useState)(""),m=Object(o.a)(h,2),O=m[0],f=m[1];return Object(E.jsxs)("div",{className:"input-form-wrapper",children:[Object(E.jsx)(u.a,{sx:{minWidth:230},id:"name-input",label:"Name",placeholder:"Name",value:s,onChange:function(e){i(e.target.value)},variant:"standard"}),Object(E.jsx)(u.a,{sx:{minWidth:230},id:"blocker-input",label:"Blocker",placeholder:"Blocker",multiline:!0,value:j,onChange:function(e){b(e.target.value)},variant:"standard"}),Object(E.jsx)(u.a,{sx:{minWidth:230},id:"ticket-input",label:"Ticket",placeholder:"Ticket",multiline:!0,value:O,onChange:function(e){f(e.target.value)},variant:"standard"}),Object(E.jsx)(l.a,{id:"submit-button",onClick:function(){J({name:s,blocker:j,ticket:O,dispatch:t}),i(a||""),b(""),f("")},sx:{marginLeft:1,marginTop:2},variant:"contained",children:"Submit"})]})},K=a(16),M=a(140),V=a(133),W=a.n(V),z=a(250),q=a(254),F=a(261),Q=a(260),X=a(262),Y=function(e){var t=e.messages,a=e.userName;return t.length?Object(E.jsxs)("div",{className:"chat-section",children:[Object(E.jsx)(Q.a,{className:"chat-section--message-area",children:t.map((function(e,t){var n=e.name===a?"right":"left";return Object(E.jsx)(z.a,{children:Object(E.jsxs)(q.a,{container:!0,children:[Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(F.a,{sx:{textAlign:n},primary:e.message})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(F.a,{sx:{textAlign:n},secondary:e.name})})]})},"".concat(t,"-").concat(a))}))}),Object(E.jsx)(X.a,{})]}):null},Z=a(29),$=a(256),ee=a(134),te=a.n(ee),ae=function(e){var t=e.inputValue,a=e.setInputValue,n=e.sendMessage;return Object(E.jsxs)("div",{className:"chat--input-wrapper",children:[Object(E.jsx)(Z.c,{sx:{ml:1,flex:1},placeholder:"Message The Group",inputProps:{"aria-label":"search google maps"},value:t,onChange:function(e){return a(e.target.value)}}),Object(E.jsx)(X.a,{orientation:"vertical"}),Object(E.jsx)($.a,{color:"primary",sx:{p:"10px"},"aria-label":"directions",onClick:function(){n(t),a("")},children:Object(E.jsx)(te.a,{})})]})},ne=(a(99),Object(M.a)("https://speedy-standup.herokuapp.com",{reconnectionDelay:1e3,reconnection:!0,transports:["websocket"],agent:!1,upgrade:!1,rejectUnauthorized:!1})),re=function(){var e=y().state.userInfo.name,t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)([]),i=Object(o.a)(s,2),u=i[0],l=i[1];Object(r.useEffect)((function(){ne.once("message",(function(e){l([].concat(Object(K.a)(u),[e]))}))}),[u]);return Object(E.jsxs)("div",{className:"chat",children:[Object(E.jsx)(Y,{userName:e,messages:u}),Object(E.jsx)(ae,{inputValue:n,setInputValue:c,sendMessage:function(t){var a=W()(new Date);a.format("HH:mm:ss"),ne.emit("message",{message:t,time:a.format("hh:mm a"),name:e})}})]})},ce=a(258),se=a(257),ie=a(259),oe=a(255),ue=a(135),le=a.n(ue),pe="https://speedy-standup.herokuapp.com",de=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n,r,c;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,r=JSON.stringify({email:a,password:n}),c="".concat(pe,"/user/login"),e.abrupt("return",A()({method:"POST",url:c,data:r,headers:{"Content-Type":"application/json"}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(w.a)(Object(S.a)().mark((function e(){var t,a;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I("token"),a="".concat(pe,"/user/me"),e.abrupt("return",A()({method:"GET",url:a,headers:{token:t}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(e){var t=e.name,a=e.email,n=e.password,r=JSON.stringify({name:t,email:a,password:n}),c="".concat(pe,"/user/signup");return A()({method:"POST",url:c,data:r,headers:{"Content-Type":"application/json"}})},he=n.SET_IS_AUTHENTICATED,me=n.SET_USER,Oe=function(e,t,a,n){n({type:me,payload:{name:e,email:t,id:a}})},fe=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,n,r,c,s;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je();case 3:a=e.sent,(n=a.data)&&(r=n.id,c=n.name,s=n.email,Oe(c,s,r,t),t({type:he,payload:!0})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ve(t),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,r,c,s,i,o,u,l,p,d;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,r=t.password,c=t.dispatch,s={email:a,password:r},e.prev=2,e.next=5,de(s);case 5:i=e.sent,o=i.data,u=o.token,l=o.name,p=o.email,d=o.id,N("token",u),Oe(l,p,d,c),c({type:n.SET_IS_AUTHENTICATED,payload:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),ve(c),c({type:n.SET_AUTH_ERROR,payload:!0});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){C.clear(),e({type:n.SET_IS_AUTHENTICATED,payload:!1}),e({type:n.RESET,payload:!0})},ke=function(){var e=Object(w.a)(Object(S.a)().mark((function e(t){var a,r,c,s,i,o,u,l,p,d,j;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.email,c=t.password,s=t.dispatch,i={name:a,email:r,password:c},e.prev=2,e.next=5,be(i);case 5:return o=e.sent,u=o.data,l=u.token,p=u.name,d=u.email,j=u._id,N("token",l),Oe(p,d,j,s),s({type:n.SET_IS_AUTHENTICATED,payload:!0}),e.abrupt("return",u);case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",e.t0.response);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=y(),t=e.dispatch,a=e.state.isAuthenticated;return Object(E.jsx)(se.a,{sx:{flexGrow:1},children:Object(E.jsx)(ce.a,{position:"static",children:Object(E.jsxs)(ie.a,{children:[Object(E.jsx)($.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(E.jsx)(le.a,{})}),Object(E.jsx)(oe.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Speedy Standup"}),a?Object(E.jsx)(l.a,{id:"logout-button",onClick:function(){return ve(t)},color:"inherit",children:"Logout"}):null]})})})},ge=a(143),Te=a(142),ye=a(247),Se=function(){var e=y(),t=e.dispatch,a=e.state.selectedDate;return Object(E.jsx)(Te.a,{dateAdapter:ge.a,children:Object(E.jsx)(ye.a,{displayStaticWrapperAs:"desktop",openTo:"day",value:a,onChange:function(e){var a=new Date(e||"");t({type:n.SET_DATE,payload:a})},renderInput:function(e){return Object(E.jsx)(u.a,Object(d.a)({},e))}})})},we=a(264),_e=a(263),Ae=a(139),Ce=a.n(Ae),Ne=function(e){var t=e.name,a=e.blocker,n=e.ticket,r=e.deleteBlocker;return Object(E.jsxs)("div",{className:"blocker-card",children:[Object(E.jsxs)(_e.a,{children:[Object(E.jsx)(oe.a,{variant:"h5",component:"div",children:t}),Object(E.jsx)(oe.a,{variant:"body2",component:"div",sx:{width:250},children:a})]}),Object(E.jsxs)(we.a,{children:[Object(E.jsx)(l.a,{size:"small",children:n}),Object(E.jsx)($.a,{"data-testid":"delete-button",onClick:r,"aria-label":"delete",children:Object(E.jsx)(Ce.a,{})})]})]})},Ie=function(){var e=y(),t=e.dispatch,a=e.state,n=a.blockers,c=a.selectedDate;Object(r.useEffect)((function(){L(t)}),[t]);return Object(E.jsx)("div",{"data-testid":"blockers-container",className:"blockers-container",children:function(){if(n.length)return n.filter((function(e){return new Date(e.createdAt).toDateString()===new Date(c).toDateString()})).map((function(e){return Object(E.jsx)("div",{children:Object(E.jsx)(Ne,{name:e.name,blocker:e.blocker,ticket:e.ticket,deleteBlocker:function(){return P(e._id||"",t,n)}})})}))}()})},De=function(){var e={email:{text:"",display:!1},password:{text:"",display:!1},name:{text:"",display:!1}},t=y(),a=t.dispatch,n=t.state.loginError,c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],p=s[1],j=Object(r.useState)(""),b=Object(o.a)(j,2),h=b[0],m=b[1],O=Object(r.useState)(""),f=Object(o.a)(O,2),x=f[0],v=f[1],k=Object(r.useState)(!0),g=Object(o.a)(k,2),T=g[0],_=g[1],A=Object(r.useState)(e),C=Object(o.a)(A,2),N=C[0],I=C[1],D=T?!i||!h:!i||!h||!x,R=T?"Login":"Sign Up",U=T?"Sign Up":"Login",H=function(){var t=Object(w.a)(Object(S.a)().mark((function t(){var n,r,c;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!T){t.next=4;break}xe({email:i,password:h,dispatch:a}),t.next=9;break;case 4:return t.next=6,ke({email:i,password:h,name:x,dispatch:a});case 6:n=t.sent,(r=n.data)&&r.errors&&(c=r.errors.reduce((function(e,t){return e[t.param]={text:t.msg,display:!0},e}),{}),I(Object(d.a)(Object(d.a)({},e),c)));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=n?"Incorrect Combination of Email and Password":N.password.text;return Object(E.jsxs)("div",{className:"login",children:[!T&&Object(E.jsx)(u.a,{error:N.name.display,className:"login--input",sx:{marginBottom:2},id:"name-input",label:"Name",placeholder:"Name",value:x,type:"string",onChange:function(e){v(e.target.value)},variant:"outlined",helperText:N.name.text}),Object(E.jsx)(u.a,{error:N.email.display||n,className:"login--input",sx:{marginBottom:2},id:"email-input",label:"Email",placeholder:"Email",value:i,onChange:function(e){p(e.target.value)},variant:"outlined",helperText:N.email.text}),Object(E.jsx)(u.a,{error:N.password.display||n,className:"login--input",id:"password-input",label:"Password",placeholder:"Password",value:h,type:"password",onChange:function(e){m(e.target.value)},variant:"outlined",helperText:B}),Object(E.jsx)(l.a,{disabled:D,onClick:H,className:"login--input",sx:{marginTop:2,height:40},variant:"contained",children:R}),Object(E.jsx)(l.a,{onClick:function(){return _(!T)},children:U})]})},Re=(a(188),function(){var e=y(),t=e.dispatch,a=e.state.isAuthenticated;Object(r.useEffect)((function(){fe(t)}),[t]);return Object(E.jsxs)("div",{children:[Object(E.jsx)(Ee,{}),!a&&Object(E.jsx)(De,{}),function(){if(a)return Object(E.jsxs)("div",{className:"inner-app",children:[Object(E.jsxs)("div",{className:"blocker-wrapper",children:[Object(E.jsx)(G,{}),Object(E.jsx)(Ie,{})]}),Object(E.jsxs)("div",{className:"chat-wrapper",children:[Object(E.jsx)(Se,{}),Object(E.jsx)(re,{})]})]})}()]})});a(189).config(),i.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(T,{children:Object(E.jsx)(Re,{})})}),document.getElementById("root"))},99:function(e,t,a){}},[[192,1,2]]]);
//# sourceMappingURL=main.8c00ae52.chunk.js.map